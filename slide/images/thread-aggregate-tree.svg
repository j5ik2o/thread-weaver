<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="962px" preserveAspectRatio="none" style="width:1428px;height:962px;" version="1.1" viewBox="0 0 1428 962" width="1428px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xy7ny678ty4g" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Thread--><rect fill="#FEFECE" filter="url(#f1xy7ny678ty4g)" height="96" id="Thread" style="stroke: #A80036; stroke-width: 3.0;" width="324" x="959" y="844"/><ellipse cx="989" cy="876" fill="#ADD1B2" rx="22" ry="22" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M993.9463,888.2861 Q992.7842,888.8838 991.5059,889.1826 Q990.2275,889.4814 988.8164,889.4814 Q983.8027,889.4814 981.1631,886.1777 Q978.5234,882.874 978.5234,876.6318 Q978.5234,870.373 981.1631,867.0693 Q983.8027,863.7656 988.8164,863.7656 Q990.2275,863.7656 991.5225,864.0645 Q992.8174,864.3633 993.9463,864.9609 L993.9463,870.4063 Q992.6846,869.2441 991.4976,868.7046 Q990.3105,868.165 989.0488,868.165 Q986.3594,868.165 984.9897,870.2983 Q983.6201,872.4316 983.6201,876.6318 Q983.6201,880.8154 984.9897,882.9487 Q986.3594,885.082 989.0488,885.082 Q990.3105,885.082 991.4976,884.5425 Q992.6846,884.0029 993.9463,882.8408 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="84" x="1017" y="885.0703">Thread</text><rect fill="#FFFFFF" height="32.2656" style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" width="172" x="1117" y="838"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="168" x="1119" y="863.2031">Domain object</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="961" x2="1281" y1="908" y2="908"/><line style="stroke: #A80036; stroke-width: 3.0;" x1="961" x2="1281" y1="924" y2="924"/><!--class ThreadAggregate--><rect fill="#FEFECE" filter="url(#f1xy7ny678ty4g)" height="121.9102" id="ThreadAggregate" style="stroke: #A80036; stroke-width: 3.0;" width="334" x="954" y="568"/><ellipse cx="984" cy="600" fill="#ADD1B2" rx="22" ry="22" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M988.9463,612.2861 Q987.7842,612.8838 986.5059,613.1826 Q985.2275,613.4814 983.8164,613.4814 Q978.8027,613.4814 976.1631,610.1777 Q973.5234,606.874 973.5234,600.6318 Q973.5234,594.373 976.1631,591.0693 Q978.8027,587.7656 983.8164,587.7656 Q985.2275,587.7656 986.5225,588.0645 Q987.8174,588.3633 988.9463,588.9609 L988.9463,594.4063 Q987.6846,593.2441 986.4976,592.7046 Q985.3105,592.165 984.0488,592.165 Q981.3594,592.165 979.9897,594.2983 Q978.6201,596.4316 978.6201,600.6318 Q978.6201,604.8154 979.9897,606.9487 Q981.3594,609.082 984.0488,609.082 Q985.3105,609.082 986.4976,608.5425 Q987.6846,608.0029 988.9463,606.8408 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="202" x="1012" y="609.0703">ThreadAggregate</text><rect fill="#FFFFFF" height="32.2656" style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" width="64" x="1230" y="562"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="60" x="1232" y="587.2031">Actor</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="956" x2="1286" y1="632" y2="632"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="176" x="966" y="661.2695">val state: Thread</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="956" x2="1286" y1="673.9102" y2="673.9102"/><!--class PersistentThreadAggregate--><rect fill="#FEFECE" filter="url(#f1xy7ny678ty4g)" height="121.9102" id="PersistentThreadAggregate" style="stroke: #A80036; stroke-width: 3.0;" width="558" x="842" y="292"/><ellipse cx="872" cy="324" fill="#ADD1B2" rx="22" ry="22" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M876.9463,336.2861 Q875.7842,336.8838 874.5059,337.1826 Q873.2275,337.4814 871.8164,337.4814 Q866.8027,337.4814 864.1631,334.1777 Q861.5234,330.874 861.5234,324.6318 Q861.5234,318.373 864.1631,315.0693 Q866.8027,311.7656 871.8164,311.7656 Q873.2275,311.7656 874.5225,312.0645 Q875.8174,312.3633 876.9463,312.9609 L876.9463,318.4063 Q875.6846,317.2441 874.4976,316.7046 Q873.3105,316.165 872.0488,316.165 Q869.3594,316.165 867.9897,318.2983 Q866.6201,320.4316 866.6201,324.6318 Q866.6201,328.8154 867.9897,330.9487 Q869.3594,333.082 872.0488,333.082 Q873.3105,333.082 874.4976,332.5425 Q875.6846,332.0029 876.9463,330.8408 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="314" x="900" y="333.0703">PersistentThreadAggregate</text><rect fill="#FFFFFF" height="32.2656" style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" width="176" x="1230" y="286"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="172" x="1232" y="311.2031">PersistentActor</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="844" x2="1398" y1="356" y2="356"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="228" x="854" y="385.2695">val childRef: ActorRef</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="844" x2="1398" y1="397.9102" y2="397.9102"/><!--class ThreadAggregates--><rect fill="#FEFECE" filter="url(#f1xy7ny678ty4g)" height="121.9102" id="ThreadAggregates" style="stroke: #A80036; stroke-width: 3.0;" width="538" x="852" y="16"/><ellipse cx="882" cy="48" fill="#ADD1B2" rx="22" ry="22" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M886.9463,60.2861 Q885.7842,60.8838 884.5059,61.1826 Q883.2275,61.4814 881.8164,61.4814 Q876.8027,61.4814 874.1631,58.1777 Q871.5234,54.874 871.5234,48.6318 Q871.5234,42.373 874.1631,39.0693 Q876.8027,35.7656 881.8164,35.7656 Q883.2275,35.7656 884.5225,36.0645 Q885.8174,36.3633 886.9463,36.9609 L886.9463,42.4063 Q885.6846,41.2441 884.4976,40.7046 Q883.3105,40.165 882.0488,40.165 Q879.3594,40.165 877.9897,42.2983 Q876.6201,44.4316 876.6201,48.6318 Q876.6201,52.8154 877.9897,54.9487 Q879.3594,57.082 882.0488,57.082 Q883.3105,57.082 884.4976,56.5425 Q885.6846,56.0029 886.9463,54.8408 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="214" x="910" y="57.0703">ThreadAggregates</text><rect fill="#FFFFFF" height="32.2656" style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" width="256" x="1140" y="10"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="252" x="1142" y="35.2031">Actor, MessageBroker</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="854" x2="1388" y1="80" y2="80"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="228" x="864" y="109.2695">val childRef: ActorRef</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="854" x2="1388" y1="121.9102" y2="121.9102"/><!--class ShardedThreadAggregates--><rect fill="#FEFECE" filter="url(#f1xy7ny678ty4g)" height="96" id="ShardedThreadAggregates" style="stroke: #A80036; stroke-width: 3.0;" width="638" x="12" y="29"/><ellipse cx="42" cy="61" fill="#ADD1B2" rx="22" ry="22" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M46.9463,73.2861 Q45.7842,73.8838 44.5059,74.1826 Q43.2275,74.4814 41.8164,74.4814 Q36.8027,74.4814 34.1631,71.1777 Q31.5234,67.874 31.5234,61.6318 Q31.5234,55.373 34.1631,52.0693 Q36.8027,48.7656 41.8164,48.7656 Q43.2275,48.7656 44.5225,49.0645 Q45.8174,49.3633 46.9463,49.9609 L46.9463,55.4063 Q45.6846,54.2441 44.4976,53.7046 Q43.3105,53.165 42.0488,53.165 Q39.3594,53.165 37.9897,55.2983 Q36.6201,57.4316 36.6201,61.6318 Q36.6201,65.8154 37.9897,67.9487 Q39.3594,70.082 42.0488,70.082 Q43.3105,70.082 44.4976,69.5425 Q45.6846,69.0029 46.9463,67.8408 Z "/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="310" x="70" y="70.0703">ShardedThreadAggregates</text><rect fill="#FFFFFF" height="32.2656" style="stroke: #000000; stroke-width: 2.0; stroke-dasharray: 2.0,2.0;" width="260" x="396" y="23"/><text fill="#000000" font-family="sans-serif" font-size="24" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="256" x="398" y="48.2031">Actor, ClusterSharding</text><line style="stroke: #A80036; stroke-width: 3.0;" x1="14" x2="648" y1="93" y2="93"/><line style="stroke: #A80036; stroke-width: 3.0;" x1="14" x2="648" y1="109" y2="109"/><!--link ShardedThreadAggregates to ThreadAggregates--><path d="M650.046,77 C703.2806,77 758.4276,77 811.4204,77 " fill="none" id="ShardedThreadAggregates-ThreadAggregates" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="none" points="811.4572,62.9998,851.457,77,811.457,90.9998,811.4572,62.9998" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="128" x="687" y="64.1367">«extends»</text><!--link ThreadAggregate to Thread--><path d="M1121,690.6618 C1121,733.7708 1121,790.9864 1121,833.4048 " fill="none" id="ThreadAggregate-Thread" style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1121,843.8526,1129,825.8526,1121,833.8526,1113,825.8526,1121,843.8526" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="1123" y="777.1367">«use»</text><!--link PersistentThreadAggregate to ThreadAggregate--><path d="M1121,414.2534 C1121,456.5966 1121,513.0748 1121,557.4836 " fill="none" id="PersistentThreadAggregate-ThreadAggregate" style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1121,567.9178,1129,549.9178,1121,557.9178,1113,549.9178,1121,567.9178" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="1123" y="501.1367">«use»</text><!--link ThreadAggregates to PersistentThreadAggregate--><path d="M1121,138.2534 C1121,180.5966 1121,237.0748 1121,281.4836 " fill="none" id="ThreadAggregates-PersistentThreadAggregate" style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1121,291.9178,1129,273.9178,1121,281.9178,1113,273.9178,1121,291.9178" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="26" lengthAdjust="spacingAndGlyphs" textLength="72" x="1123" y="225.1367">«use»</text><!--
@startuml

class Thread<Domain object>

class ThreadAggregate<Actor> {
  val state: Thread
}

class PersistentThreadAggregate<PersistentActor> {
  val childRef: ActorRef
}


class ThreadAggregates<Actor, MessageBroker> {
  val childRef: ActorRef
}

class ShardedThreadAggregates<Actor, ClusterSharding>{
}

ShardedThreadAggregates -right-|> ThreadAggregates: <<extends>>
ThreadAggregate .down.> Thread: <<use>>
PersistentThreadAggregate .down.> ThreadAggregate: <<use>>
ThreadAggregates .down.> PersistentThreadAggregate: <<use>>


@enduml

PlantUML version 1.2019.05(Sun Apr 21 01:45:36 JST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b28
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>